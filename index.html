<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Pizzeria Dolus d'Ol√©ron üçï</title>
<style>
:root{--primary:#ff6b35;--success:#28a745;--dark:#212529}
*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui,sans-serif}
body{background:linear-gradient(135deg,var(--primary),#f7931e);min-height:100vh;padding:15px}
.container{max-width:500px;margin:0 auto}
.card{background:#fff;border-radius:24px;padding:30px;margin:20px 0;box-shadow:0 20px 40px rgba(0,0,0,.15)}
.btn{background:var(--primary);color:#fff;border:0;padding:16px;border-radius:12px;font-size:16px;cursor:pointer;width:100%;margin:8px 0;font-weight:600;transition:.3s}
.btn:hover{opacity:.9}
.btn-white{background:#fff;color:var(--primary);border:2px solid var(--primary)}
.btn-success{background:var(--success)}
.input{background:#f8f9fa;border:2px solid #eee;padding:16px;border-radius:12px;font-size:16px;width:100%;margin:8px 0}
.produit{display:flex;align-items:center;padding:20px;background:#f8f9fa;border-radius:16px;margin:12px 0;cursor:pointer;transition:.3s}
.produit:hover{background:#fff;box-shadow:0 10px 25px rgba(0,0,0,.1)}
.emoji{width:70px;height:70px;border-radius:16px;margin-right:20px;display:flex;align-items:center;justify-content:center;font-size:24px;background:var(--primary);color:#fff}
.prix{font-size:22px;font-weight:bold;color:var(--primary)}
.panier-item{display:flex;justify-content:space-between;padding:15px 0;border-bottom:1px solid #eee}
.cat-tabs{display:flex;gap:10px;margin-bottom:25px}
.cat-tab{padding:12px 20px;border-radius:12px;background:#f0f0f0;cursor:pointer;transition:.3s;font-weight:500}
.cat-tab.active{background:var(--primary);color:#fff}
.total{font-size:26px;font-weight:bold;color:var(--success);text-align:center;padding:25px;background:#f0f8ff;border-radius:16px;margin:20px 0}
.code{background:var(--primary);color:#fff;padding:25px;border-radius:16px;text-align:center;font-size:28px;font-weight:bold;letter-spacing:2px;margin:20px 0}
.loader{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.95);color:#fff;display:flex;align-items:center;justify-content:center;font-size:20px;z-index:999}
@media(max-width:480px){.container{padding:10px}}
</style>
</head>
<body>
<div id="loader" class="loader">üçï Pizzeria Dolus - Chargement...</div>

<div class="container">
  <!-- FORMULAIRE CLIENT -->
  <div id="clientForm" class="card">
    <h2 style="text-align:center;color:var(--primary);margin-bottom:25px;font-size:28px">üë§ Mes Coordonn√©es</h2>
    <input id="prenom" class="input" placeholder="Pr√©nom *" required>
    <input id="nom" class="input" placeholder="Nom *" required>
    <input id="telephone" class="input" placeholder="T√©l√©phone *" required>
    <input id="email" class="input" placeholder="Email (facultatif)">
    <button class="btn" onclick="saveClient()">‚úÖ Enregistrer & Menu</button>
    <div style="text-align:center;color:#666;font-size:14px;margin-top:15px">
      Retour client ? Donn√©es m√©moris√©es automatiquement
    </div>
  </div>

  <!-- MENU -->
  <div id="menuSection" class="card" style="display:none">
    <div class="cat-tabs">
      <div class="cat-tab active" onclick="showCategory('pizzas')">üçï Pizzas</div>
      <div class="cat-tab" onclick="showCategory('boissons')">ü•§ Boissons</div>
      <div class="cat-tab" onclick="showCategory('desserts')">üç∞ Desserts</div>
    </div>
    
    <div id="clientInfo" style="background:#e8f5e8;padding:15px;border-radius:12px;margin-bottom:20px;text-align:center">
      <strong id="clientDisplay"></strong>
    </div>
    
    <h3 id="catTitle" style="color:var(--primary);margin-bottom:20px">Pizzas</h3>
    <div id="produits"></div>
    <button class="btn" onclick="showPanier()">
      üõí Panier <span id="panierBadge">0</span> - <span id="totalBadge">0‚Ç¨</span>
    </button>
  </div>

  <!-- PANIER -->
  <div id="panierSection" class="card" style="display:none">
    <h2 style="color:var(--primary);margin-bottom:20px">üõí Mon Panier</h2>
    <div id="panierContenu"></div>
    <div class="total">TOTAL : <span id="totalPanier">0‚Ç¨</span></div>
    <button class="btn btn-success" onclick="validerCommande()">‚úÖ Commander</button>
    <button class="btn btn-white" onclick="backToMenu()">‚Üê Modifier Menu</button>
  </div>

  <!-- CONFIRMATION -->
  <div id="confirmation" class="card" style="display:none;text-align:center">
    <h2 style="color:var(--success)">üéâ Commande Confirm√©e !</h2>
    <div id="clientConfirm"></div>
    <div class="code" id="codeCommande"></div>
    <div id="heureDispo" style="font-size:18px;color:var(--primary);margin:20px 0"></div>
    <button class="btn btn-white" onclick="imprimer()">üñ®Ô∏è Imprimer Ticket</button>
    <button class="btn" onclick="resetApp()">‚ûï Nouvelle Commande</button>
  </div>
</div>

<script>
// DONN√âES (onglets s√©par√©s)
const DATA = {
  pizzas: [
    {id:1,nom:'Prosciutto',desc:'Sauce Tomate, Jambon Blanc Italien, Fior Di Latte',prix:11},
    {id:2,nom:'Reine',desc:'Sauce tomate, Jambon Blanc, Champignons, Fior Di Latte',prix:12},
    {id:3,nom:'Cabri',desc:'Cr√®me Fra√Æche, Ch√®vre, Noix, Miel, Salade',prix:13},
    {id:4,nom:'Doussette',desc:'Cr√®me, Jambon Blanc, Champignons, Ch√®vre',prix:13},
    {id:5,nom:'V√©g√©tarienne',desc:'Champignons, Tomates Cerise, Parmesan, Artichauts',prix:13},
    {id:6,nom:'Orientale',desc:'√âpices Orientales, Poivrons, Merguez, Olives',prix:13},
    {id:7,nom:'Catalane',desc:'√âpices Espagnoles, Chorizo, Poivrons, Oignons',prix:13}
  ],
  boissons: [
    {id:8,nom:'Coca Cola',desc:'33cl glac√©e',prix:3},
    {id:9,nom:'Eau p√©tillante',desc:'50cl',prix:2},
    {id:10,nom:'Bi√®re pression',desc:'25cl',prix:4}
  ],
  desserts: [
    {id:11,nom:'Tiramisu',desc:'Maison',prix:6},
    {id:12,nom:'Cr√®me br√ªl√©e',desc:'Sp√©ciale Dolus',prix:6},
    {id:13,nom:'Sorbet citron',desc:'Artisanal',prix:4}
  ]
};

let currentClient = {}, panier = [], currentCategory = 'pizzas';

function hideLoader(){document.getElementById('loader').style.display='none'}

// CLIENT
function saveClient(){
  const prenom = document.getElementById('prenom').value.trim();
  const nom = document.getElementById('nom').value.trim();
  const tel = document.getElementById('telephone').value.trim();
  const email = document.getElementById('email').value.trim();
  
  if(!prenom || !nom || !tel) return alert('Pr√©nom, Nom et T√©l√©phone obligatoires !');
  
  currentClient = {prenom, nom, tel, email};
  
  // M√©moriser
  localStorage.setClient = JSON.stringify(currentClient);
  
  // Simuler save Sheets
  console.log('CLIENT sauv√©:', currentClient);
  
  document.getElementById('clientDisplay').innerHTML = `${prenom} ${nom} ‚Ä¢ ${tel}`;
  document.getElementById('clientForm').style.display = 'none';
  document.getElementById('menuSection').style.display = 'block';
  showCategory('pizzas');
  hideLoader();
}

// Load client m√©moire
function loadClientMemory(){
  const saved = localStorage.getClient;
  if(saved){
    const client = JSON.parse(saved);
    document.getElementById('prenom').value = client.prenom || '';
    document.getElementById('nom').value = client.nom
